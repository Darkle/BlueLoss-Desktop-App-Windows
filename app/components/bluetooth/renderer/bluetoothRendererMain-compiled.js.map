{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/components/bluetooth/renderer/bluetoothRendererMain.lsc","webpack:///./app/components/debugWindow/debugWindow.lsc","webpack:///./app/components/logging/customRollbarTransport.lsc","webpack:///./app/components/logging/logSettingsUpdates.lsc","webpack:///./app/components/logging/logging.lsc","webpack:///./app/components/logging/userDebugLogger.lsc","webpack:///./app/components/runOnStartup.lsc","webpack:///./app/components/settings/devices.lsc","webpack:///./app/components/settings/settings.lsc","webpack:///./app/components/settings/settingsDefaults.lsc","webpack:///./app/components/settings/settingsIPClisteners.lsc","webpack:///./app/components/settings/settingsObservers.lsc","webpack:///./app/components/settingsWindow/settingsWindow.lsc","webpack:///./app/components/tray/tray.lsc","webpack:///./app/components/utils.lsc","webpack:///external \"auto-launch\"","webpack:///external \"electron\"","webpack:///external \"gawk\"","webpack:///external \"is-empty\"","webpack:///external \"lowdb\"","webpack:///external \"lowdb/adapters/FileSync\"","webpack:///external \"path\"","webpack:///external \"rollbar\"","webpack:///external \"timeproxy\"","webpack:///external \"typa\"","webpack:///external \"url\"","webpack:///external \"util\"","webpack:///external \"winston\""],"names":["messageOrEvent","source","lineNumber","columnNumber","error","ipcRenderer","send","window","onerror","handleRendererWindowError","onunhandledrejection","url","format","protocol","slashes","pathname","path","resolve","__dirname","debugWindow","webContents","openDevTools","mode","BrowserWindow","show","loadURL","debugWindowHTMLpath","once","setTimeout","debug","settingsWindow","debugMode","close","event","logger","accessToken","process","env","rollbarAccessToken","enabled","captureUncaught","captureUnhandledRejections","environment","reportLevel","payload","mainOrRenderer","platform","processVersions","versions","arch","BlueLossVersion","transform","server","Rollbar","rollbarConfig","winston","transports","CustomLogger","options","Object","assign","util","inherits","CustomRollbarTransport","Transport","prototype","log","level","msg","callback","rollbarLogger","newSettingKey","newSettingValue","is","obj","debugMessage","logSettingsUpdateForDebugMode","name","handleExceptions","humanReadableUnhandledException","Logger","exitOnError","add","Console","UserDebugLoggerTransport","userDebugTransportOptions","configure","rollbarTransportOptions","remove","ipcMain","on","addRollbarLogging","removeRollbarLogging","meta","isError","executeJavaScript","consoleMethod","loggerMessage","createObjectStringForLog","catch","noop","cleanedMetaObj","stack","split","JSON","stringify","AutoLaunch","isHidden","firstRun","blueLossAutoLauncher","enable","err","disable","enableRunOnStartup","disableRunOnStartup","deviceToAdd","deviceId","deviceIsInDevicesToSearchFor","devicesToSearchFor","deviceToRemove","filterDevicesToSearchFor","deviceIdToRemove","device","propName","propValue","updateDeviceInDevicesToSearchFor","addNewDeviceToSearchFor","removeNewDeviceToSearchFor","updateLastSeenForDevicesLookingForOnStartup","join","electronApp","getPath","db","settings","FileSync","settingsDBpath","adapter","defaults","defaultSettings","write","getState","set","initSettings","updateSetting","getSettings","blueLossEnabled","runOnStartup","trayIconColor","timeToLock","reportErrors","settingsWindowPosition","settingName","settingValue","initSettingsIPClisteners","gawk","watch","changeTrayIcon","initSettingsObservers","settingsWindowRendererDirPath","width","height","title","autoHideMenuBar","resizable","fullscreenable","fullscreen","frame","icon","getIconPath","webPreferences","textAreasAreResizable","devTools","ISDEV","getStoredWindowPosition","Menu","buildFromTemplate","role","sender","settingsWindowProperties","settingsHTMLpath","setMenu","settingsWindowMenu","getBounds","dock","hide","x","y","iconsDir","iconFileName","showSettingsWindow","isVisible","toggleSettingsWindow","tray","Tray","getNewTrayIconPath","setContextMenu","createContextMenu","setToolTip","label","click","generateEnabledDisabledLabel","toggleEnabledFromTray","quit","trayIconsFolder","newTrayIconColor","setImage","initTrayMenu","updateTrayMenu","require","version","appVersion","fns","reduceRight","accumulator","current","value","param","now","tp","FIVE_HUNDRED_WEEKS","getOwnPropertyNames","reduce","newObj","omitInheritedProperties","Date","today","getHours","getMinutes","getSeconds","console","exit","compose","identity","tenYearsFromNow","getProperAppVersion","generateLogTimeStamp","bailOnFatalError"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;AClFA;;AAEA;;AAEA,mCAA0BA,cAA1B,EAA0CC,MAA1C,EAAkDC,UAAlD,EAA8DC,YAA9D,EAA4EC,KAA5E,EAAwF;AACtFC,wBAAYC,IAAZ,CAAiB,2CAAjB,EACE,EAAEN,cAAF,EAAkBC,MAAlB,EAA0BC,UAA1B,EAAsCC,YAAtC,EAAoDC,OAAO,oCAAwBA,KAAxB,CAA3D,EADF;AAEC,CAEHG,OAAOC,OAAP,GAAiBC,yBAAjB;AACAF,OAAOG,oBAAP,GAA8BD,yBAA9B,C;;;;;;;;;;;;;;;;;;;ACVA;;;;AACA;;;;AACA;;AAEA;;AACA;;AACA;;AACA;;;;AAEA,4BAAsBE,cAAIC,MAAJ,CAAW;AAC/BC,YAAU,MADqB;AAE/BC,WAAS,IAFsB;AAG/BC,YAAUC,eAAKC,OAAL,CAAaC,SAAb,EAAwB,YAAxB,EAAsC,aAAtC,EAAqD,UAArD,EAAiE,kBAAjE;AAHqB,CAAX,CAAtB;AAKA,IAAIC,cAAc,IAAlB;;AAEA,2BAAuB;AACrB,MAAGA,WAAH,EAAc;AACZ,WAAOA,YAAYC,WAAZ,CAAwBC,YAAxB,CAAqC,EAAEC,MAAM,UAAR,EAArC,CAAP;AAAgE,GAElE,QA6BAH,WA7BA,GAAIA,WAAJ,GAAkB,IAAII,uBAAJ,CAAkB,EAAEC,MAAM,KAAR,EAAlB,CAAlB;AACAL,cAAYM,OAAZ,CAAoBC,mBAApB;AACAP,cAAYC,WAAZ,CAAwBC,YAAxB,CAAqC,EAAEC,MAAM,UAAR,EAArC;;AAEAH,cAAYQ,IAAZ,CAAiB,QAAjB,EAA2B,YAAQ;AACjC,YAwBFR,WAxBE,GAAIA,WAAJ,GAAkB,IAAlB;AAAsB,GADxB;AAGA;;;;;AAKAA,cAAYC,WAAZ,CAAwBO,IAAxB,CAA6B,iBAA7B,EAAgD,YAAQ;AACtDC,eAAW,MAAM;AACf,6BAAOC,KAAP,CAAa,4BAAb,EAA2C,iCAAqB,4BAArB,CAA3C;AACD,KAFD,EAEG,GAFH;AAEO,GAHT;AAKAV,cAAYC,WAAZ,CAAwBO,IAAxB,CAA6B,iBAA7B,EAAgD,YAAQ;AAAA;;AACtDG,8GAAgBV,WAAhB,2CAA6Bd,IAA7B,CAAkC,qCAAlC,EAAyE,EAACyB,WAAW,KAAZ,EAAzE;AACAZ,gBAAYa,KAAZ;AAAmB,GAFrB;AAIAb,cAAYC,WAAZ,CAAwBO,IAAxB,CAA6B,SAA7B,EAAwC,UAACM,KAAD,EAAa;AACnDC,oBAAO9B,KAAP,CAAa,iCAAb,EAAgD6B,KAAhD;AAAsD,GADxD;AAGAd,cAAYQ,IAAZ,CAAiB,cAAjB,EAAiC,UAACM,KAAD,EAAa;AAC5CC,oBAAO9B,KAAP,CAAa,0BAAb,EAAyC6B,KAAzC;AAA+C,GADjD;AAEC,C,QAGDd,W,GAAAA,W;;;;;;;;;;;;;;;;;;;ACjDF;;;;AAEA;;;;AACA;;;;AAEA;;;;AAEA,sBAAgB;AACdgB,eAAaC,QAAQC,GAAR,CAAYC,kBADX;AAEdC,WAAS,KAFK;AAGdC,mBAAiB,IAHH;AAIdC,8BAA4B,IAJd;AAKdC,eAAa,aALC;AAMdC,eAAa,OANC;AAOdC,WAAS;AACLC,oBAAgB,MADX;AAELC,cAAUV,QAAQU,QAFb;AAGLC,qBAAiBX,QAAQY,QAHpB;AAILC,UAAMb,QAAQa,IAJT;AAKLC,qBAAiB;AALZ,GAPK;AAcZ;AACAC,YAAUP,OAAV,EAAkB;AAChB,mBAAQQ,MAAR,GAAiB,EAAjB;AACD;AAjBW,CAAhB;;AAoBA,sBAAgB,IAAIC,iBAAJ,CAAYC,aAAZ,CAAhB;;AAEA,+BAAyBC,kBAAQC,UAAR,CAAmBC,YAAnB,GAAkC,UAACC,OAAD,EAAe;AACxEC,SAAOC,MAAP,CAAc,IAAd,EAAoBF,OAApB;AAA4B,CAD9B,CAGAG,eAAKC,QAAL,CAAcC,sBAAd,EAAsCR,kBAAQS,SAA9C;;AAEAD,uBAAuBE,SAAvB,CAAiCC,GAAjC,GAAuC,UAACC,KAAD,EAAQC,MAAM,EAAd,EAAkBhE,KAAlB,EAAyBiE,QAAzB,EAAwC;AAC7E;AACA,MAAGF,UAAU,OAAb,EAAsB;AACtBG,gBAAclE,KAAd,CAAoBgE,GAApB,EAAyBhE,KAAzB;AACAiE,WAAS,IAAT,EAAe,IAAf;AAAoB,CAJtB,C,QAQEN,sB,GAAAA,sB;QACAO,a,GAAAA,a;;;;;;;;;;;;;;;;;;;AC3CF;;;;AAEA;;AACA;;AACA;;;;AAEA,uCAA8BC,aAA9B,EAAqDC,eAArD,EAA0F;AACxF,MAAG,KAAH,EAAuC;AACvC,uBAAgB,6BAA6BD,aAAe,SAA5D;AACA,MAAGE,eAAGC,GAAH,CAAOF,eAAP,CAAH,EAA0B;AACxBtC,oBAAOL,KAAP,CAAa8C,YAAb,EAA2B,EAAE,CAACJ,aAAD,GAAiBC,eAAnB,EAA3B;AAAgE,GADlE,MAEI;AACFtC,oBAAOL,KAAP,CAAc,GAAG8C,YAAc,IAAIH,eAAiB,EAApD;AAAsD;AAAA,C,QAIxDI,6B,GAAAA,6B;;;;;;;;;;;;;;;;;;;ACfF;;AACA;;;;AAEA;;AACA;;AACA;;;;AAEA,gCAA0B;AACxBC,QAAM,kBADkB;AAExBV,SAAO,OAFiB;AAGxBW,oBAAkB,IAHM;AAIxBC,mCAAiC;AAJT,CAA1B;AAMA,kCAA4B;AAC1BF,QAAM,oBADoB;AAE1BV,SAAO,OAFmB;AAG1BW,oBAAkB,IAHQ;AAI1BC,mCAAiC;;AAGnC;AAP4B,CAA5B,CAQA,eAAS,IAAIxB,kBAAQyB,MAAZ,CAAmB;AAC1Bb,SAAO,OADmB;AAE1Bc,eAAa;AAFa,CAAnB,CAAT;;AAKA,IAAG,IAAH,EAAQ;AACN/C,SAAOgD,GAAP,CAAW3B,kBAAQC,UAAR,CAAmB2B,OAA9B,EAAuC;AACrCL,sBAAkB,IADmB;AAErCC,qCAAiC;AACjC;AAHqC,GAAvC;AAIE,C,CACJ;AACA,IAAG,KAAH,EAAwC,EAGxC7C,OAAOgD,GAAP,CAAWE,yCAAX,EAAqCC,yBAArC;AACA;;;;;AAKA,6BAAyB;AACvBf,wCAAcgB,SAAd,CAAwB,EAAC/C,SAAS,IAAV,EAAxB;AACAL,SAAOgD,GAAP,CAAWnB,8CAAX,EAAmCwB,uBAAnC;AAA2D,CAE7D,gCAA4B;AAC1BjB,wCAAcgB,SAAd,CAAwB,EAAC/C,SAAS,KAAV,EAAxB;AACAL,SAAOsD,MAAP,CAAc,kBAAd;AAAiC,CAEnCC,kBAAQC,EAAR,CAAW,8BAAX,EAA2C,UAACzD,KAAD,EAAQ7B,KAAR,EAAoB;AAC7D8B,SAAO9B,KAAP,CAAa,8BAAb,EAA6CA,KAA7C;AAAmD,CADrD;AAGAqF,kBAAQC,EAAR,CAAW,2CAAX,EAAwD,UAACzD,KAAD,EAAQ7B,KAAR,EAAoB;AAC1E8B,SAAO9B,KAAP,CAAa,2CAAb,EAA0DA,KAA1D;AAAgE,CADlE;;QAME8B,M,GAAAA,M;QACAyD,iB,GAAAA,iB;QACAC,oB,GAAAA,oB;;;;;;;;;;;;;;;;;;;AC9DF;;;;AAEA;;;;AACA;;;;AAEA;;AACA;;;;AAEA;;;;AAIA,iCAA2BrC,kBAAQC,UAAR,CAAmBC,YAAnB,GAAkC,UAACC,OAAD,EAAe;AAC1EC,SAAOC,MAAP,CAAc,IAAd,EAAoBF,OAApB;AAA4B,CAD9B,CAGAG,eAAKC,QAAL,CAAcsB,wBAAd,EAAwC7B,kBAAQS,SAAhD;;AAEAoB,yBAAyBnB,SAAzB,CAAmCC,GAAnC,GAAyC,UAACC,KAAD,EAAQC,MAAM,EAAd,EAAkByB,OAAO,EAAzB,EAA6BxB,QAA7B,EAA4C;AAAA;;AACnF,kBAAUF,UAAU,OAApB;AACA,wBAAmB2B,OAAH,GAAY,QAAZ,GAA2B1B,GAA3C;AACA,wBAAmB0B,OAAH,GAAY,OAAZ,GAA0B,KAA1C;;AAEA3E,gGAAaC,WAAb,kDAA0B2E,iBAA1B,iDAA0BA,iBAA1B,CACG,WAAWC,aAAe,MAAM,kCAAwB,KAAKC,aAAe,SAASC,yBAAyBL,IAAzB,CAAgC,IADxH,EAEEM,KAFF,CAEQC,WAFR;;AAIA/B,WAAS,IAAT,EAAe,IAAf;AAAoB,CATtB,CAWA,kCAAyBwB,IAAzB,EAA6C;AAC3C,yBAAiB,oCAAwBA,IAAxB,CAAjB;AACA,MAAG,uBAAQQ,cAAR,CAAH,EAA4B,OAAO,EAAP;AAC5B,MAAGA,eAAeC,KAAlB,EAAyBD,eAAeC,KAAf,GAAuBD,eAAeC,KAAf,CAAqBC,KAArB,CAA2B,UAA3B,CAAvB;AACzB,SAAC,kBAAkBC,KAAKC,SAAL,CAAeJ,cAAf,CAAgC,YAAnD;AAA8D,C,QAI9DjB,wB,GAAAA,wB;;;;;;;;;;;;;;;;;;;ACpCF;;;;AAEA;;;;AAEA,6BAAuB,IAAIsB,oBAAJ,CAAe;AACpC7B,QAAM,UAD8B;AAEpC8B,YAAU;AAF0B,CAAf,CAAvB;;AAKA,4BAAmBC,QAAnB,EAAkC;AAChC,MAAGA,YAAa,IAAhB,EAAuB;AACvBC,uBAAqBC,MAArB,GAA8BX,KAA9B,CAAoC,UAACY,GAAD,EAAW;AAC7C7E,oBAAO9B,KAAP,CAAa,4BAAb,EAA2C2G,GAA3C;AAA+C,GADjD;AAEC,CAEH,+BAA2B;AACzBF,uBAAqBG,OAArB,GAA+Bb,KAA/B,CAAqC,UAACY,GAAD,EAAW;AAC9C7E,oBAAO9B,KAAP,CAAa,6BAAb,EAA4C2G,GAA5C;AAAgD,GADlD;AAEC,C,QAGDE,kB,GAAAA,kB;QACAC,mB,GAAAA,mB;;;;;;;;;;;;;;;;;;;;;ACtBF;;AACA;;AACA;;AAEA,iCAAwBC,WAAxB,EAAsD;AACpD,UAAEC,QAAF,KAAeD,WAAf;AACA,MAAGE,6BAA6BD,QAA7B,CAAH,EAA2C;AAC3C,+BAAc,oBAAd,eACM,6BAAcE,kBADpB,EAC2C,EAAE,CAAEF,QAAF,GAAcD,WAAhB,EAD3C;AAEC,CAEH,oCAA2BI,cAA3B,EAA4D;AAC1D,UAAEH,QAAF,KAAeG,cAAf;AACA,MAAG,CAACF,6BAA6BD,QAA7B,CAAJ,EAA4C;AAC5C,+BAAc,oBAAd,EAAoCI,yBAAyBJ,QAAzB,CAApC;AAAuE,CAEzE,kCAAyBK,gBAAzB,EAA0D;AAEtD;AADF,oBACE,SAAmC,qCAAcH,kBAAjD,UAAmC,0BAAnC,EAAmC,mBAAnC,OAAmC,IAAnC,QAAmE;AAAhC,YAAxBF,QAAwB,SAAnC,EAAmC,QAAVM,MAAU,SAAxBN,QAAwB;AACjC,UAAGA,aAAYK,gBAAf,EAFJ,IAEqC,CAAIL,QAAJ,IAAgBM,MAAhB;AAAwB,KAAC,OAF9D,IAE8D;AAAD,GAD3D;AAED;;AAEH,sCAA6BN,QAA7B,EAAuD;AACrD,sCAAcE,kBAAd,CAAiCF,QAAjC;AAA0C,CAE5C,0CAAiCA,QAAjC,EAAmDO,QAAnD,EAAqEC,SAArE,EAA4F;AAC1F,sCAAc,oBAAd,eAEO,6BAAcN,kBAFrB,EAGO;AACD,KAAEF,QAAF,gBACK,6BAAcE,kBAAd,CAAiCF,QAAjC,CADL,EAEK,EAAE,CAAEO,QAAF,GAAcC,SAAhB,EAFL;AADC,GAHP;AAUC,C,CAEH;;;;;;;;;AASA,uDAAmD;AACjD,WAAwB,qCAAcN,kBAAtC,WAAwB,2BAAxB,EAAwB,qBAAxB,QAAwB,KAAxB,SAAwD;AAAhC,sBAAxB,GAAwB,QAAhB,EAAEF,QAAF,EAAgB;AACtBS,qCAAiCT,QAAjC,EAA2C,UAA3C,EAAuD,6BAAvD;AAAyE;AAAA,C,QAI3EU,uB,GAAAA,uB;QACAC,0B,GAAAA,0B;QACAF,gC,GAAAA,gC;QACAG,2C,GAAAA,2C;;;;;;;;;;;;;;;;;;;ACxDF;;;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,uBAAiBhH,eAAKiH,IAAL,CAAUC,cAAYC,OAAZ,CAAoB,UAApB,CAAV,EAA2C,wBAA3C,CAAjB;;AAEA,IAAIC,KAAK,IAAT;AACA,IAAIC,WAAW,IAAf;;AAEA,wBAAoB;AAClB,kBAAU,IAAIC,kBAAJ,CAAaC,cAAb,CAAV;AACIH,IAAJ,GAAS,qBAAII,OAAJ,CAAT;AACAJ,KAAGK,QAAH,CAAYC,iCAAZ,EAA6BC,KAA7B;AACIN,UAAJ,GAAe,oBAAKD,GAAGQ,QAAH,EAAL,CAAf;AACA,gDAAsBP,QAAtB;AACA;AACA;AAA6C,CAE/C,uBAAiBA;AAAAA;AAAQA,CAEzB,uBAAc9D,aAAd,EAAqCC,eAArC,EAA0E;AACxE6D,WAAS9D,aAAT,IAA0BC,eAA1B;AACA4D,KAAGS,GAAH,CAAOtE,aAAP,EAAsBC,eAAtB,EAAuCmE,KAAvC;AACA,yDAA8BpE,aAA9B,EAA6CC,eAA7C;AAA6D,C,QAI7DsE,Y,GAAAA,Y;QACAC,a,GAAAA,a;QACAC,W,GAAAA,W;;;;;;;;;;;;;;;;;;;ACvCF;;AAEA,wBAUI;AACFC,mBAAiB,IADf;AAEFC,gBAAc,IAFZ;AAGFC,iBAAe,MAHb;AAIF7B,sBAAoB,EAJlB;AAKF8B,cAAY,CALV;AAMFC,gBAAc,IANZ;AAOFzC,YAAU,IAPR;AAQF0C,0BAAwB,EARtB;AASFvH,aAAW;AATT,CAVJ;;QAuBE2G,e,GAAAA,e;;;;;;;;;;;;;;;;;;;ACzBF;;AAEA;;AACA;;AAEA,oCAAgC;AAC9BjD,oBAAQC,EAAR,CAAW,gCAAX,EAA6C,UAACzD,KAAD,EAAQsH,WAAR,EAA6BC,YAA7B,EAA+D;AAC1G,iCAAcD,WAAd,EAA2BC,YAA3B;AAAwC,GAD1C;AAGA/D,oBAAQC,EAAR,CAAW,6BAAX,EAA0C,UAACzD,KAAD,EAAQkF,WAAR,EAAsC;AAC9E,2CAAwBA,WAAxB;AAAoC,GADtC;AAGA1B,oBAAQC,EAAR,CAAW,+BAAX,EAA4C,UAACzD,KAAD,EAAQsF,cAAR,EAAyC;AACnF,8CAA2BA,cAA3B;AAA0C,GAD5C;AAEC,C,QAGDkC,wB,GAAAA,wB;;;;;;;;;;;;;;;;;;;AChBF;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,+BAAsBpB,QAAtB,EAAqC;AACnCqB,iBAAKC,KAAL,CAAWtB,QAAX,EAAqB,CAAC,iBAAD,CAArB,EAA0C,UAAC9F,OAAD,EAAwB;AAAA;;AAChET,8GAAgBV,WAAhB,2CAA6Bd,IAA7B,CAAkC,qCAAlC,EAAyE,EAAC2I,iBAAiB1G,OAAlB,EAAzE;AACA;AAAgB,GAFlB;AAIAmH,iBAAKC,KAAL,CAAWtB,QAAX,EAAqB,CAAC,cAAD,CAArB,EAAuC,UAAC9F,OAAD,EAAwB;AAC7D,QAAGA,OAAH,EAAY,kCAAZ,KACM;AAAsB,GAF9B;AAIAmH,iBAAKC,KAAL,CAAWtB,QAAX,EAAqB,CAAC,cAAD,CAArB,EAAuC,UAAC9F,OAAD,EAAwB;AAC7D,QAAGA,OAAH,EAAY,wCAAZ,KACM;AAAqB,GAF7B;AAIAmH,iBAAKC,KAAL,CAAWtB,QAAX,EAAqB,CAAC,WAAD,CAArB,EAAoC,UAAC9F,OAAD,EAAwB;AAC1D,QAAGA,OAAH,EAAY,oCAAZ,KACMpB,4EAAaa,KAAb,oDAAaA,KAAb;AAAqB,GAF7B;AAIA0H,iBAAKC,KAAL,CAAWtB,QAAX,EAAqB,CAAC,eAAD,CAArB,EAAwCuB,oBAAxC;AAAuD,C,QAGvDC,qB,GAAAA,qB;;;;;;;;;;;;;;;;;;;;;ACzBF;;AAJA;;;;AACA;;;;AACA;;AAIA;;AACA;;;;AACA;;AAEA,sCAAgC7I,eAAKiH,IAAL,CAAU/G,SAAV,EAAqB,YAArB,EAAmC,gBAAnC,EAAqD,UAArD,CAAhC;AACA,iBAAWF,eAAKiH,IAAL,CAAU6B,6BAAV,EAAyC,QAAzC,EAAmD,OAAnD,CAAX;AACA,yBAAmBnJ,cAAIC,MAAJ,CAAW;AAC5BC,YAAU,MADkB;AAE5BC,WAAS,IAFmB;AAG5BC,YAAUC,eAAKC,OAAL,CAAa6I,6BAAb,EAA4C,qBAA5C;AAHkB,CAAX,CAAnB;AAKA,0CACK;AACDC,SAAO,GADN;AAEDC,UAAQ,GAFP;AAGDC,SAAO,UAHN;AAIDC,mBAAiB,IAJhB;AAKDC,aAAW,KALV;AAMDC,kBAAgB,KANf;AAODC,cAAY,KAPX;AAQDC,SAAO,KARN;AASD9I,QAAM,KATL;AAUD+I,QAAMC,aAVL;AAWDC,kBAAgB;AACdC,2BAAuB,KADT;AAEdC,cAAU,IAAAC;AAFI;AAXf,CADL,EAiBKC,yBAjBL;AAmBA;;;;AAIA,2BAAwB,KAAH,GAAUC,eAAKC,iBAAL,CAAuB,CAAC,EAACC,MAAM,QAAP,EAAD,CAAvB,CAAV,GAA2D,SAAhF;AACA,IAAIlJ,iBAAiB,IAArB;;AAEA,8BAA0B;AACxB,MAAGA,cAAH,EAAmB,OAAOA,eAAeN,IAAf,EAAP;;AAEnBiE,oBAAQC,EAAR,CAAW,oCAAX,EAAiD,iBAAM;AACrD,iBAAMuF,MAAN,CAAa3K,IAAb,CAAkB,oCAAlB,EAAwD,4BAAxD;AAAsE,GADxE;;AAIA,UAqDAwB,cArDA,GAAIA,cAAJ,GAAqB,IAAIP,uBAAJ,cAChB2J,wBADgB,EAEhBL,yBAFgB,EAGhB,EAAEN,MAAMC,aAAR,EAHgB,EAArB;AAKA1I,iBAAeL,OAAf,CAAuB0J,gBAAvB;AACArJ,iBAAesJ,OAAf,CAAuBC,kBAAvB;AACA,MAAG,IAAH,EAAUvJ,eAAeV,WAAf,CAA2BC,YAA3B,CAAwC,EAAEC,MAAM,UAAR,EAAxC;;AAEVQ,iBAAeH,IAAf,CAAoB,OAApB,EAA6B,YAAQ;AACnC,iCAAc,wBAAd,EAAwCG,eAAewJ,SAAf,EAAxC;AAAmE,GADrE;AAGAxJ,iBAAeH,IAAf,CAAoB,eAApB,EAAqC,YAAQ;AAC3CG,mBAAeN,IAAf;AAAqB,GADvB;AAGAM,iBAAeH,IAAf,CAAoB,QAApB,EAA8B,YAAQ;AAAA;;AACpC,YAqCFG,cArCE,GAAIA,cAAJ,GAAqB,IAArB;AACA,uCAAYyJ,IAAZ,uCAAkBC,IAAlB;AAAwB,GAF1B;AAIA1J,iBAAeV,WAAf,CAA2BO,IAA3B,CAAgC,SAAhC,EAA2C,UAACM,KAAD,EAAa;AACtDC,oBAAO9B,KAAP,CAAa,oCAAb,EAAmD6B,KAAnD;AAAyD,GAD3D;AAGAH,iBAAeH,IAAf,CAAoB,cAApB,EAAoC,UAACM,KAAD,EAAa;AAC/CC,oBAAO9B,KAAP,CAAa,6BAAb,EAA4C6B,KAA5C;AAAkD,GADpD;AAEC,CAEH,mCAAiC;AAC/B,UAAEwJ,CAAF,EAAKC,CAAL,KAAW,6BAAcpC,sBAAzB;AACA,WAAEmC,CAAF,EAAKC,CAAL;AAAQ,CAEV,uBAAqB;AACnB,uBAAgB,YAAY,6BAAcvC,aAAe,cAAzD;AACA,wBAAKlB,IAAL,CAAU0D,QAAV,EAAoBC,YAApB;AAAiC,CAEnC,gCAA4B;AAC1B,MAAG,CAAC9J,cAAJ,EAAkB;AAChB+J;AAAoB,GADtB,MAEA,IAAK/J,eAAegK,SAAf,EAAL,EAA+B;AAC7BhK,mBAAeE,KAAf;AAAsB;AAAA,C,CAE1B;;;;AAIA;AACA;AACA;AACA;AACA;;QAGE6J,kB,GAAAA,kB;QACAE,oB,GAAAA,oB;QACAjK,c,GAAAA,c;;;;;;;;;;;;;;;;;;;ACvGF;;;;AACA;;AAEA;;AACA;;;;AAEA,IAAIkK,OAAO,IAAX;AACA,wBAAkBhL,eAAKC,OAAL,CAAaC,SAAb,EAAwB,YAAxB,EAAsC,MAAtC,EAA8C,OAA9C,CAAlB;;AAEA,wBAAoB;AACd8K,MAAJ,GAAW,IAAIC,cAAJ,CAASC,mBAAmB,6BAAc/C,aAAjC,CAAT,CAAX;AACA6C,OAAKG,cAAL,CAAoBC,mBAApB;AACAJ,OAAKK,UAAL,CAAgB,UAAhB;AACAL,OAAKtG,EAAL,CAAQ,cAAR,EAAwBqG,oCAAxB;AAA6C,CAE/C,6BAA2B;AACzB,wBAAKhB,iBAAL,CACE,CACE;AACEuB,WAAO,wBADT;AAEEC,WAAOV;AAFT,GADF,EAKE;AACES,WAAOE,8BADT;AAEED,WAAOE;AAFT,GALF,EASE;AACEH,WAAO,eADT;AAEEC,WAAOrE,cAAYwE;AAFrB,GATF,CADF;AAeC,CAEH,4BAAmBvD,aAAnB,EAAiD;AAC/C,wBAAKlB,IAAL,CAAU0E,eAAV,EAA4B,YAAYxD,aAAe,cAAvD;AAAqE,CAEvE,wCAAsC;AACpC,SAAC,GAAM,6BAAcF,eAAjB,GAAkC,SAAlC,GAAkD,QAAU,WAAhE;AAA0E,CAE5E,wBAAe2D,gBAAf,EAA8C;AAC5CZ,OAAKa,QAAL,CAAcX,mBAAmBU,gBAAnB,CAAd;AAAmD,CAErD,0BAAsB;AACpBZ,OAAKG,cAAL,CAAoBC,mBAApB;AAAwC,CAE1C,iCAA6B;AAC3B,+BAAc,iBAAd,EAAiC,CAAC,6BAAcnD,eAAhD;AAAgE,C,QAGhE6D,Y,GAAAA,Y;QACAlD,c,GAAAA,c;QACAwC,iB,GAAAA,iB;QACAW,c,GAAAA,c;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDF;;;;AACA;;;;AAEA;;;;AAEA;;;;;AAKA,mBAAa,mBAAAC,CAAQ,0CAAR,EAA8BC,OAA3C;;AAEA,+BAAgCC;AAAAA;AAAUA,C,CAC1C;AACA,gBAAO;AAAG;AAAM,CAChB,iBAAQ,GAAGC,GAAX,EAAmB;AAAA,0BAAS;AAAA,eAAIC,WAAJ,CAAgB,CAACC,WAAD,EAAcC,OAAd,KAA0BA,QAAQD,WAAR,CAA1C,EAAgEE,KAAhE;AAAsE,GAA/E;AAA+E,CAClG,kBAASC,KAAT,EAAmBA;AAAAA;AAAKA,CACxB,2BAA4B;AAAA,cAAKC,GAAL,KAAaC,oBAAGC,kBAAhB;AAAkC,C,CAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAwBjJ,GAAxB,EAA4C;AAC1C,gBAAOkJ,mBAAP,CAA2BlJ,GAA3B,EAAgCmJ,MAAhC,CAAuC,UAACC,MAAD,EAASnG,QAAT,EAAmB;AACxD,QAAGlD,eAAGC,GAAH,CAAOA,IAAIiD,QAAJ,CAAP,CAAH,EAAwB;AACtB,0BAAWmG,MAAX,EAAsB,EAAE,CAACnG,QAAD,GAAYoG,wBAAwBrJ,IAAIiD,QAAJ,CAAxB,CAAd,EAAtB;AAA6E,KAC/E,oBAAImG,MAAJ,EAAe,EAAE,CAACnG,QAAD,GAAYjD,IAAIiD,QAAJ,CAAd,EAAf;AAA6C,GAH/C,EAIE,EAJF;AAIK,CAEP,gCAA8B;AAC5B,gBAAQ,IAAIqG,IAAJ,EAAR;AACA,SAAC,IAAIC,MAAMC,QAAN,EAAkB,IAAID,MAAME,UAAN,EAAoB,IAAIF,MAAMG,UAAN,EAAoB,GAAvE;AAAyE,CAE3E,0BAAiBrH,GAAjB,EAA2B;AACzBsH,UAAQjO,KAAR,CAAc2G,GAAd;AACA7E,4DAAQ9B,KAAR,2CAAQA,KAAR,CAAe2G,GAAf;AACA3E,UAAQkM,IAAR,CAAa,CAAb;AAAe,C,QAIfP,uB,GAAAA,uB;QACA3H,I,GAAAA,I;QACAmI,O,GAAAA,O;QACAC,Q,GAAAA,Q;QACAC,e,GAAAA,e;QACAC,mB,GAAAA,mB;QAEAC,oB,GAAAA,oB;QACAC,gB,GAAAA,gB;;;;;;;;;;;;;;;;;;;;;;ACtDF,wC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,gC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,oC","file":"bluetoothRendererMain-compiled.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app/components/bluetooth/renderer/bluetoothRendererMain.lsc\");\n","import { ipcRenderer } from 'electron'\r\n\r\nimport { omitInheritedProperties } from '../../utils.lsc'\r\n\r\nhandleRendererWindowError(messageOrEvent, source, lineNumber, columnNumber, error):void ->\r\n  ipcRenderer.send('bluetooth-scan-window-renderer:error-sent',\r\n    { messageOrEvent, source, lineNumber, columnNumber, error: omitInheritedProperties(error) }\r\n  )\r\n\r\nwindow.onerror = handleRendererWindowError\r\nwindow.onunhandledrejection = handleRendererWindowError\r\n","import path from 'path'\r\nimport url from 'url'\r\nimport { BrowserWindow, ipcMain } from 'electron'\r\n\r\nimport { logger } from '../logging/logging.lsc'\r\nimport { getSettings } from '../settings/settings.lsc'\r\nimport { settingsWindow } from '../settingsWindow/settingsWindow.lsc'\r\nimport { omitGawkFromSettings } from '../utils.lsc'\r\n\r\ndebugWindowHTMLpath = url.format({\r\n  protocol: 'file',\r\n  slashes: true,\r\n  pathname: path.resolve(__dirname, 'components', 'debugWindow', 'renderer', 'debugWindow.html')\r\n})\r\nlet debugWindow = null\r\n\r\nshowDebugWindow():void ->\r\n  if debugWindow:\r\n    return debugWindow.webContents.openDevTools({ mode: 'undocked'})\r\n\r\n  now debugWindow = new BrowserWindow({ show: false})\r\n  debugWindow.loadURL(debugWindowHTMLpath)\r\n  debugWindow.webContents.openDevTools({ mode: 'undocked'})\r\n\r\n  debugWindow.once('closed', ():void ->\r\n    now debugWindow = null\r\n  )\r\n  /**\r\n   * Without a delay, the console has trouble showing the VM:line to the right of\r\n   * what you just logged, instead it shows (unknown) which kinda looks like we're\r\n   * printing 'Current BlueLoss settings: (unknown)'\r\n   */\r\n  debugWindow.webContents.once('devtools-opened', ():void ->\r\n    setTimeout(() => {\r\n      logger.debug('Current BlueLoss settings:', omitGawkFromSettings(getSettings()))\r\n    }, 500)\r\n  )\r\n  debugWindow.webContents.once('devtools-closed', ():void ->\r\n    settingsWindow?.webContents?.send('mainprocess:setting-updated-in-main', {debugMode: false})\r\n    debugWindow.close()\r\n  )\r\n  debugWindow.webContents.once('crashed', (event):void ->\r\n    logger.error('debugWindow.webContents crashed', event)\r\n  )\r\n  debugWindow.once('unresponsive', (event):void ->\r\n    logger.error('debugWindow unresponsive', event)\r\n  )\r\n\r\nexport {\r\n  debugWindow,\r\n}\r\n","import util from 'util'\r\n\r\nimport winston from 'winston'\r\nimport Rollbar from 'rollbar'\r\n\r\nimport { getProperAppVersion } from '../utils.lsc'\r\n\r\nrollbarConfig = {\r\n  accessToken: process.env.rollbarAccessToken,\r\n  enabled: false,\r\n  captureUncaught: true,\r\n  captureUnhandledRejections: true,\r\n  environment: process.env.NODE_ENV,\r\n  reportLevel: 'error',\r\n  payload: {\r\n      mainOrRenderer: 'main',\r\n      platform: process.platform,\r\n      processVersions: process.versions,\r\n      arch: process.arch,\r\n      BlueLossVersion: getProperAppVersion()\r\n    },\r\n    // Ignore the server stuff cause that includes info about the host pc name.\r\n    transform(payload){\r\n      payload.server = {}\r\n    },\r\n}\r\n\r\nrollbarLogger = new Rollbar(rollbarConfig)\r\n\r\nCustomRollbarTransport = winston.transports.CustomLogger = (options):void ->\r\n  Object.assign(this, options)\r\n\r\nutil.inherits(CustomRollbarTransport, winston.Transport)\r\n\r\nCustomRollbarTransport.prototype.log = (level, msg = '', error, callback):void ->\r\n  // Only log errors.\r\n  if level !== 'error': return\r\n  rollbarLogger.error(msg, error)\r\n  callback(null, true)\r\n\r\n\r\nexport {\r\n  CustomRollbarTransport\r\n  rollbarLogger\r\n}\r\n","import is from 'typa'\r\n\r\nimport { SettingsTypes } from '../types/types.lsc'\r\nimport { getSettings } from '../settings/settings.lsc'\r\nimport { logger } from './logging.lsc'\r\n\r\nlogSettingsUpdateForDebugMode(newSettingKey: string, newSettingValue: SettingsTypes):void ->\r\n  if !ISDEV && !getSettings().debugMode: return\r\n  debugMessage = `Updated Setting: updated '${ newSettingKey }' with:`\r\n  if is.obj(newSettingValue):\r\n    logger.debug(debugMessage, { [newSettingKey]: newSettingValue })\r\n  else:\r\n    logger.debug(`${ debugMessage } ${ newSettingValue }`)\r\n\r\n\r\nexport {\r\n  logSettingsUpdateForDebugMode\r\n}\r\n","\r\nimport { ipcMain } from 'electron'\r\nimport winston from 'winston'\r\n\r\nimport { CustomRollbarTransport, rollbarLogger } from './customRollbarTransport.lsc'\r\nimport { UserDebugLoggerTransport } from './userDebugLogger.lsc'\r\nimport { getSettings } from '../settings/settings.lsc'\r\n\r\nrollbarTransportOptions = {\r\n  name: 'rollbarTransport',\r\n  level: 'error',\r\n  handleExceptions: true,\r\n  humanReadableUnhandledException: true,\r\n}\r\nuserDebugTransportOptions = {\r\n  name: 'userDebugTransport',\r\n  level: 'debug',\r\n  handleExceptions: true,\r\n  humanReadableUnhandledException: true,\r\n}\r\n\r\n// https://github.com/winstonjs/winston/tree/2.4.0\r\nlogger = new winston.Logger({\r\n  level: 'debug',\r\n  exitOnError: false\r\n})\r\n\r\nif ISDEV:\r\n  logger.add(winston.transports.Console, {\r\n    handleExceptions: true,\r\n    humanReadableUnhandledException: true,\r\n    // json: true\r\n  })\r\n// dont send errors to rollbar in dev && only if enabled.\r\nif !ISDEV and getSettings().reportErrors:\r\n  addRollbarLogging()\r\n\r\nlogger.add(UserDebugLoggerTransport, userDebugTransportOptions)\r\n/**\r\n* We also need to enable/disable the rollbar module itself as well,\r\n* as it is set to report uncaught exceptions as well as logging\r\n* caught errors.\r\n*/\r\naddRollbarLogging():void ->\r\n  rollbarLogger.configure({enabled: true})\r\n  logger.add(CustomRollbarTransport, rollbarTransportOptions)\r\n\r\nremoveRollbarLogging():void ->\r\n  rollbarLogger.configure({enabled: false})\r\n  logger.remove('rollbarTransport')\r\n\r\nipcMain.on('settings-renderer:error-sent', (event, error):void ->\r\n  logger.error('settings-renderer:error-sent', error)\r\n)\r\nipcMain.on('bluetooth-scan-window-renderer:error-sent', (event, error):void ->\r\n  logger.error('bluetooth-scan-window-renderer:error-sent', error)\r\n)\r\n\r\n\r\nexport {\r\n  logger,\r\n  addRollbarLogging,\r\n  removeRollbarLogging,\r\n}\r\n","import util from 'util'\r\n\r\nimport winston from 'winston'\r\nimport isEmpty from 'is-empty'\r\n\r\nimport { debugWindow } from '../debugWindow/debugWindow.lsc'\r\nimport { omitInheritedProperties, noop, generateLogTimeStamp } from '../utils.lsc'\r\n\r\n/****\r\n* This is the loggger for when the user checks the \"debug\" checkbox in the options\r\n* window. The log data is sent to the debug window renderer devtools console.\r\n*/\r\nUserDebugLoggerTransport = winston.transports.CustomLogger = (options):void ->\r\n  Object.assign(this, options)\r\n\r\nutil.inherits(UserDebugLoggerTransport, winston.Transport)\r\n\r\nUserDebugLoggerTransport.prototype.log = (level, msg = '', meta = {}, callback):void ->\r\n  isError = level === 'error'\r\n  loggerMessage = if isError: 'Error:' else: msg\r\n  consoleMethod = if isError: 'error' else: 'log'\r\n\r\n  debugWindow?.webContents?.executeJavaScript?(\r\n    `console.${ consoleMethod }(\\`${ generateLogTimeStamp() }  ${ loggerMessage }\\n\\`, ${ createObjectStringForLog(meta) });`\r\n  ).catch(noop)\r\n\r\n  callback(null, true)\r\n\r\ncreateObjectStringForLog(meta:Object):Object ->\r\n  cleanedMetaObj = omitInheritedProperties(meta)\r\n  if isEmpty(cleanedMetaObj): return ''\r\n  if cleanedMetaObj.stack: cleanedMetaObj.stack = cleanedMetaObj.stack.split(/\\r\\n?|\\n/)\r\n  `JSON.stringify(${ JSON.stringify(cleanedMetaObj) }, null, 4)`\r\n\r\n\r\nexport {\r\n  UserDebugLoggerTransport,\r\n}\r\n","import AutoLaunch from 'auto-launch'\r\n\r\nimport { logger } from './logging/logging.lsc'\r\n\r\nblueLossAutoLauncher = new AutoLaunch({\r\n  name: 'BlueLoss',\r\n  isHidden: true\r\n})\r\n\r\nenableRunOnStartup(firstRun):void ->\r\n  if firstRun and ISDEV: return\r\n  blueLossAutoLauncher.enable().catch((err):void ->\r\n    logger.error('enableRunOnStartup error: ', err)\r\n  )\r\n\r\ndisableRunOnStartup():void ->\r\n  blueLossAutoLauncher.disable().catch((err):void ->\r\n    logger.error('disableRunOnStartup error: ', err)\r\n  )\r\n\r\nexport {\r\n  enableRunOnStartup,\r\n  disableRunOnStartup,\r\n}\r\n","import { tenYearsFromNow } from '../utils.lsc'\r\nimport { DeviceType } from '../types/types.lsc'\r\nimport { updateSetting, getSettings } from './settings.lsc'\r\n\r\naddNewDeviceToSearchFor(deviceToAdd: DeviceType):void ->\r\n  { deviceId } = deviceToAdd\r\n  if deviceIsInDevicesToSearchFor(deviceId): return\r\n  updateSetting('devicesToSearchFor',\r\n    {...getSettings().devicesToSearchFor, ...{ [ deviceId ]: deviceToAdd }}\r\n  )\r\n\r\nremoveNewDeviceToSearchFor(deviceToRemove: DeviceType):void ->\r\n  { deviceId } = deviceToRemove\r\n  if !deviceIsInDevicesToSearchFor(deviceId): return\r\n  updateSetting('devicesToSearchFor', filterDevicesToSearchFor(deviceId))\r\n\r\nfilterDevicesToSearchFor(deviceIdToRemove: string):Object ->\r\n  {\r\n    ...for key deviceId, val device in getSettings().devicesToSearchFor:\r\n      if deviceId != deviceIdToRemove: { [ deviceId ]: device }\r\n  }\r\n\r\ndeviceIsInDevicesToSearchFor(deviceId: string):boolean ->\r\n  getSettings().devicesToSearchFor[deviceId]\r\n\r\nupdateDeviceInDevicesToSearchFor(deviceId: string, propName: string, propValue: any):Object ->\r\n  updateSetting('devicesToSearchFor',\r\n    {\r\n      ...getSettings().devicesToSearchFor,\r\n      ...{\r\n        [ deviceId ]: {\r\n          ...getSettings().devicesToSearchFor[deviceId],\r\n          ...{ [ propName ]: propValue }\r\n        }\r\n      }\r\n    }\r\n  )\r\n\r\n/**\r\n * When a user starts up BlueLoss after previously exiting, the\r\n * lastSeen value will be out of date for the devices in\r\n * devicesToSearchFor. This would cause BlueLoss to lock the\r\n * system straight away because the lastSeen value + timeToLock\r\n *  will be less than Date.now(). So to prevent this, we give all\r\n * devices in devicesToSearchFor a lastSeen of 10 years from now.\r\n * (when a device is seen again during a scan, lastSeen is updated.)\r\n */\r\nupdateLastSeenForDevicesLookingForOnStartup():void ->\r\n  for val { deviceId } in getSettings().devicesToSearchFor:\r\n    updateDeviceInDevicesToSearchFor(deviceId, 'lastSeen', tenYearsFromNow())\r\n\r\n\r\nexport {\r\n  addNewDeviceToSearchFor,\r\n  removeNewDeviceToSearchFor,\r\n  updateDeviceInDevicesToSearchFor,\r\n  updateLastSeenForDevicesLookingForOnStartup,\r\n}\r\n","import path from 'path'\r\nimport { app as electronApp } from 'electron'\r\n\r\nimport gawk from 'gawk'\r\nimport low from 'lowdb'\r\nimport FileSync from 'lowdb/adapters/FileSync'\r\n\r\nimport { SettingsTypes } from '../types/types.lsc'\r\nimport { defaultSettings } from './settingsDefaults.lsc'\r\nimport { initSettingsObservers } from './settingsObservers.lsc'\r\nimport { initSettingsIPClisteners } from './settingsIPClisteners.lsc'\r\nimport { updateLastSeenForDevicesLookingForOnStartup } from './devices.lsc'\r\nimport { logSettingsUpdateForDebugMode } from '../logging/logSettingsUpdates.lsc'\r\n\r\nsettingsDBpath = path.join(electronApp.getPath('userData'), 'blueloss-settings.json')\r\n\r\nlet db = null\r\nlet settings = null\r\n\r\ninitSettings():void ->\r\n  adapter = new FileSync(settingsDBpath)\r\n  now db = low(adapter)\r\n  db.defaults(defaultSettings).write()\r\n  now settings = gawk(db.getState())\r\n  initSettingsObservers(settings)\r\n  initSettingsIPClisteners()\r\n  updateLastSeenForDevicesLookingForOnStartup()\r\n\r\ngetSettings() -> settings\r\n\r\nupdateSetting(newSettingKey: string, newSettingValue: SettingsTypes):void ->\r\n  settings[newSettingKey] = newSettingValue\r\n  db.set(newSettingKey, newSettingValue).write()\r\n  logSettingsUpdateForDebugMode(newSettingKey, newSettingValue)\r\n\r\n\r\nexport {\r\n  initSettings,\r\n  updateSetting,\r\n  getSettings,\r\n}\r\n","import { SettingsWindowPositionType } from '../types/types.lsc'\r\n\r\ndefaultSettings: {\r\n  blueLossEnabled: boolean,\r\n  runOnStartup: boolean,\r\n  trayIconColor: string,\r\n  devicesToSearchFor: Object,\r\n  timeToLock: number,\r\n  reportErrors: boolean,\r\n  firstRun: boolean,\r\n  settingsWindowPosition: SettingsWindowPositionType,\r\n  debugMode: boolean,\r\n} = {\r\n  blueLossEnabled: true,\r\n  runOnStartup: true,\r\n  trayIconColor: 'blue',\r\n  devicesToSearchFor: {},\r\n  timeToLock: 3,\r\n  reportErrors: true,\r\n  firstRun: true,\r\n  settingsWindowPosition: {},\r\n  debugMode: false,\r\n}\r\n\r\nexport {\r\n  defaultSettings\r\n}\r\n","import { ipcMain } from 'electron'\r\n\r\nimport { DeviceType, SettingsTypes } from '../types/types.lsc'\r\nimport { updateSetting, addNewDeviceToSearchFor, removeNewDeviceToSearchFor } from './settings.lsc'\r\n\r\ninitSettingsIPClisteners():void ->\r\n  ipcMain.on('renderer:setting-updated-in-ui', (event, settingName: string, settingValue: SettingsTypes):void ->\r\n    updateSetting(settingName, settingValue)\r\n  )\r\n  ipcMain.on('renderer:device-added-in-ui', (event, deviceToAdd: DeviceType):void ->\r\n    addNewDeviceToSearchFor(deviceToAdd)\r\n  )\r\n  ipcMain.on('renderer:device-removed-in-ui', (event, deviceToRemove: DeviceType):void ->\r\n    removeNewDeviceToSearchFor(deviceToRemove)\r\n  )\r\n\r\nexport {\r\n  initSettingsIPClisteners\r\n}\r\n","\r\nimport gawk from 'gawk'\r\n\r\nimport { settingsWindow } from '../settingsWindow/settingsWindow.lsc'\r\nimport { addRollbarLogging, removeRollbarLogging } from '../logging/logging.lsc'\r\nimport { changeTrayIcon, updateTrayMenu } from '../tray/tray.lsc'\r\nimport { enableRunOnStartup, disableRunOnStartup } from '../runOnStartup.lsc'\r\nimport { showDebugWindow, debugWindow } from '../debugWindow/debugWindow.lsc'\r\n\r\ninitSettingsObservers(settings):void ->\r\n  gawk.watch(settings, ['blueLossEnabled'], (enabled: boolean):void ->\r\n    settingsWindow?.webContents?.send('mainprocess:setting-updated-in-main', {blueLossEnabled: enabled})\r\n    updateTrayMenu()\r\n  )\r\n  gawk.watch(settings, ['reportErrors'], (enabled: boolean):void ->\r\n    if enabled: addRollbarLogging()\r\n    else: removeRollbarLogging()\r\n  )\r\n  gawk.watch(settings, ['runOnStartup'], (enabled: boolean):void ->\r\n    if enabled: enableRunOnStartup()\r\n    else: disableRunOnStartup()\r\n  )\r\n  gawk.watch(settings, ['debugMode'], (enabled: boolean):void ->\r\n    if enabled: showDebugWindow()\r\n    else: debugWindow?.close?()\r\n  )\r\n  gawk.watch(settings, ['trayIconColor'], changeTrayIcon)\r\n\r\nexport {\r\n  initSettingsObservers\r\n}\r\n","import path from 'path'\r\nimport url from 'url'\r\nimport { app as electronApp, BrowserWindow, Menu, ipcMain } from 'electron'\r\n\r\n// import omit from 'lodash.omit'\r\n\r\nimport { getSettings, updateSetting } from '../settings/settings.lsc'\r\nimport { logger } from '../logging/logging.lsc'\r\n// import { omitInheritedProperties, omitGawkFromSettings } from '../common/utils.lsc'\r\n\r\nsettingsWindowRendererDirPath = path.join(__dirname, 'components', 'settingsWindow', 'renderer')\r\niconsDir = path.join(settingsWindowRendererDirPath, 'assets', 'icons')\r\nsettingsHTMLpath = url.format({\r\n  protocol: 'file',\r\n  slashes: true,\r\n  pathname: path.resolve(settingsWindowRendererDirPath, 'settingsWindow.html')\r\n})\r\nsettingsWindowProperties = {\r\n  ...{\r\n    width: 786,\r\n    height: 616,\r\n    title: 'BlueLoss',\r\n    autoHideMenuBar: true,\r\n    resizable: false,\r\n    fullscreenable: false,\r\n    fullscreen: false,\r\n    frame: false,\r\n    show: false,\r\n    icon: getIconPath(),\r\n    webPreferences: {\r\n      textAreasAreResizable: false,\r\n      devTools: ISDEV,\r\n    }\r\n  },\r\n  ...getStoredWindowPosition()\r\n}\r\n/****\r\n* Remove the menu in alt menu bar in prod, so they dont accidentally exit the app.\r\n* Reload is for dev so we can easily reload the browserwindow with Ctrl+R.\r\n*/\r\nsettingsWindowMenu = if ISDEV: Menu.buildFromTemplate([{role: 'reload'}]) else: null\r\nlet settingsWindow = null\r\n\r\nshowSettingsWindow():void ->\r\n  if settingsWindow: return settingsWindow.show()\r\n\r\n  ipcMain.on('renderer:intitial-settings-request', event ->\r\n    event.sender.send('mainprocess:intitial-settings-sent', getSettings())\r\n  )\r\n\r\n  now settingsWindow = new BrowserWindow({\r\n    ...settingsWindowProperties,\r\n    ...getStoredWindowPosition(),\r\n    ...{ icon: getIconPath() }\r\n  })\r\n  settingsWindow.loadURL(settingsHTMLpath)\r\n  settingsWindow.setMenu(settingsWindowMenu)\r\n  if ISDEV: settingsWindow.webContents.openDevTools({ mode: 'undocked'})\r\n\r\n  settingsWindow.once('close', ():void ->\r\n    updateSetting('settingsWindowPosition', settingsWindow.getBounds())\r\n  )\r\n  settingsWindow.once('ready-to-show', ():void ->\r\n    settingsWindow.show()\r\n  )\r\n  settingsWindow.once('closed', ():void ->\r\n    now settingsWindow = null\r\n    electronApp.dock?.hide()\r\n  )\r\n  settingsWindow.webContents.once('crashed', (event):void ->\r\n    logger.error('settingsWindow.webContents crashed', event)\r\n  )\r\n  settingsWindow.once('unresponsive', (event):void ->\r\n    logger.error('settingsWindow unresponsive', event)\r\n  )\r\n\r\ngetStoredWindowPosition():Object ->\r\n  { x, y } = getSettings().settingsWindowPosition\r\n  { x, y }\r\n\r\ngetIconPath():string ->\r\n  iconFileName = `BlueLoss-${ getSettings().trayIconColor }-512x512.png`\r\n  path.join(iconsDir, iconFileName)\r\n\r\ntoggleSettingsWindow():void ->\r\n  if !settingsWindow:\r\n    showSettingsWindow()\r\n  elif settingsWindow.isVisible():\r\n    settingsWindow.close()\r\n\r\n/**\r\n * Some settings are just used internally and never exposed to the user -\r\n * e.g. firstRun, settingsWindowPosition, etc.\r\n */\r\n// createSettingsWindowInitialSettings():Object ->\r\n//   omit(\r\n//     omitGawkFromSettings(omitInheritedProperties(getSettings())),\r\n//     ['firstRun', 'settingsWindowPosition', 'dateLastCheckedForAppUpdate', 'skipUpdateVersion']\r\n//   )\r\n\r\nexport {\r\n  showSettingsWindow,\r\n  toggleSettingsWindow,\r\n  settingsWindow,\r\n}\r\n","import path from 'path'\r\nimport { Tray, Menu, app as electronApp } from 'electron'\r\n\r\nimport { showSettingsWindow, toggleSettingsWindow } from '../settingsWindow/settingsWindow.lsc'\r\nimport { updateSetting, getSettings } from '../settings/settings.lsc'\r\n\r\nlet tray = null\r\ntrayIconsFolder = path.resolve(__dirname, 'components', 'tray', 'icons')\r\n\r\ninitTrayMenu():void ->\r\n  now tray = new Tray(getNewTrayIconPath(getSettings().trayIconColor))\r\n  tray.setContextMenu(createContextMenu())\r\n  tray.setToolTip('BlueLoss')\r\n  tray.on('double-click', toggleSettingsWindow)\r\n\r\ncreateContextMenu():Object ->\r\n  Menu.buildFromTemplate(\r\n    [\r\n      {\r\n        label: 'Open BlueLoss Settings',\r\n        click: showSettingsWindow\r\n      },\r\n      {\r\n        label: generateEnabledDisabledLabel(),\r\n        click: toggleEnabledFromTray\r\n      },\r\n      {\r\n        label: 'Quit BlueLoss',\r\n        click: electronApp.quit\r\n      }\r\n    ]\r\n  )\r\n\r\ngetNewTrayIconPath(trayIconColor: string):string ->\r\n  path.join(trayIconsFolder, `BlueLoss-${ trayIconColor }-128x128.png`)\r\n\r\ngenerateEnabledDisabledLabel():string ->\r\n  `${ if getSettings().blueLossEnabled: 'Disable' else: 'Enable' } BlueLoss`\r\n\r\nchangeTrayIcon(newTrayIconColor: string):void ->\r\n  tray.setImage(getNewTrayIconPath(newTrayIconColor))\r\n\r\nupdateTrayMenu():void ->\r\n  tray.setContextMenu(createContextMenu())\r\n\r\ntoggleEnabledFromTray():void ->\r\n  updateSetting('blueLossEnabled', !getSettings().blueLossEnabled)\r\n\r\nexport {\r\n  initTrayMenu,\r\n  changeTrayIcon,\r\n  createContextMenu,\r\n  updateTrayMenu,\r\n}\r\n","import tp from 'timeproxy'\r\nimport is from 'typa'\r\n\r\nimport { logger} from './logging/logging.lsc'\r\n\r\n/**\r\n * If you run Electron by pointing it to a js file that's not in the base parent directory with the\r\n * package.json it will report the Electron binary version rather than what's in your package.json.\r\n * https://github.com/electron/electron/issues/7085\r\n */\r\nappVersion = require('../../package.json').version\r\n\r\ngetProperAppVersion():string -> appVersion\r\n// omitGawkFromSettings(settings) -> recursivelyOmitObjProperties(settings, ['__gawk__'])\r\nnoop() -> return\r\ncompose(...fns) -> value -> fns.reduceRight((accumulator, current) => current(accumulator), value)\r\nidentity(param) -> param\r\ntenYearsFromNow():number -> Date.now() + tp.FIVE_HUNDRED_WEEKS\r\n\r\n// recursivelyOmitObjProperties(obj: Object, propertyFiltersArr: Array<string> = []):Object ->\r\n//   Object.keys(obj).reduce((newObj, propName) ->\r\n//     for elem propertyToFilter in propertyFiltersArr:\r\n//       if propertyToFilter === propName: return newObj\r\n//     if is.obj(obj[propName]):\r\n//       return {...newObj, ...{ [propName]: recursivelyOmitObjProperties(obj[propName], propertyFiltersArr) }}\r\n//     {...newObj, ...{ [propName]: obj[propName] }}\r\n//   , {})\r\n\r\nomitInheritedProperties(obj: Object):Object ->\r\n  Object.getOwnPropertyNames(obj).reduce((newObj, propName) ->\r\n    if is.obj(obj[propName]):\r\n      return {...newObj, ...{ [propName]: omitInheritedProperties(obj[propName]) }}\r\n    {...newObj, ...{ [propName]: obj[propName] }}\r\n  , {})\r\n\r\ngenerateLogTimeStamp():String ->\r\n  today = new Date()\r\n  `[${ today.getHours() }:${ today.getMinutes() }:${ today.getSeconds() }]`\r\n\r\nbailOnFatalError(err):void ->\r\n  console.error(err)\r\n  logger?.error?(err)\r\n  process.exit(1)\r\n\r\nexport {\r\n  // omitGawkFromSettings,\r\n  omitInheritedProperties,\r\n  noop,\r\n  compose,\r\n  identity,\r\n  tenYearsFromNow,\r\n  getProperAppVersion,\r\n  // recursivelyOmitObjProperties,\r\n  generateLogTimeStamp,\r\n  bailOnFatalError,\r\n}\r\n","module.exports = require(\"auto-launch\");","module.exports = require(\"electron\");","module.exports = require(\"gawk\");","module.exports = require(\"is-empty\");","module.exports = require(\"lowdb\");","module.exports = require(\"lowdb/adapters/FileSync\");","module.exports = require(\"path\");","module.exports = require(\"rollbar\");","module.exports = require(\"timeproxy\");","module.exports = require(\"typa\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"winston\");"],"sourceRoot":""}